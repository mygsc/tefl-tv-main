/****
* This video player is not compatible for EI browser 8 and earlier version :( sorry
* Author by: G-rald Burasca
* wanna know more about me just visit my site at w3.geraldburasca.com (coming soooon.........)
* feel free to contact me -> gerald.burasca27@gmail.com
* Created on Feb. 2015 - present
* use strict"; 
****/

document.addEventListener("DOMContentLoaded", main, false);
$('#controls').hide();$('#ads-hide').hide();$('#loader').fadeIn(); 
$(document).ready(function(){
	$('#controls').fadeIn();
	$('#loader').fadeOut();
	if(autoplay == 1){
		document.getElementById('media-video').play();
		incView(filename);
		adsLine();
	 }else if(autoplay == 0) adsLine();
});
var mediaPlayer = document.getElementById('media-video'), role = 1, videoAutoplay = 0, annotationAutoplay = 1, seen = false, countAnnotation=0,count=0,  duration = $('#duration').val(), autoplay = $('#autoplay').val(), filename = $('#filename').val(), percentageloaded, handle, timeout, progressHandle=false, hideControls = false, mouseOverPlayer =false, progWidth, mp4, webm, vidMp4Src, vidWebmSrc, buffPercent, percentLoaded, loader, progress, hrs=0, mins=0, secs=0, tmpSecs=0, adsTime = 5, ads=0, vidMinLenght=0, vidSecLenght=0, videoCurrentTime=0,playPauseBtn, timeDuration=0,muteBtn, playIcon = false, replay, _time, curHrs, curMin, curSec, durHrs, durMin, durSec,progressBar, soundHover = false, volumeHover = false, currentTime=0, videoPlaying = false, start = false, error = false,videoTimeLenght,volumes=0, volumeClick = false, mouseX = 0, mouseY = 0, volumeY=0, volumeDrag = false, progressbarClick = false,updProgWidth = 0, videoControls, bufferedAmount, currentBuffered, currentProgress, playBtn, play, seekSlider,highQual,normalQual, lowQual, fullscreenVid, mouseMoving=false;
var errorMsg = 'An error occured please try again later.';
var vidMsg = 'Video is not ready please try again later.';
var notifyMsg = 'Your video is saved we will notify you when your video is ready to watch.';
var connectionMsg = 'You have no internet connection.';
var url = window.location.href;
if(url.indexOf('watch') > 0){
	countAnnotation = document.querySelector('[name="count-annotation"]').value;
	role = document.querySelector('input[name="role"]').value;
	if(role == 3 || role == 5) adsLine();
	if(countAnnotation>0){
		$('.annotation-close').bind('click', function(){
			var id =  this.id;
			id = id.replace('annotation-','');
			$('#'+id).fadeOut(500);
		});
		var annotation = function(){
			return {
					show: function(){
							  for(var i = 0; i < countAnnotation; i++){
							  	var startTime = document.getElementById('start-t-annotation'+i).value;
							  	var endTime =  document.getElementById('end-t-annotation'+i).value;
							  	if(Math.floor(mediaPlayer.currentTime)==startTime) {$('#close-'+i).fadeIn();}
							  	if(Math.floor(mediaPlayer.currentTime)==endTime) {$('#close-'+i).fadeOut();}
							 }
						}
					}
		}();
		
	}
}

function main(){
	mp4 = document.getElementById('mp4');
	webm = document.getElementById('webm');
	vidMp4Src = mp4.src;
	vidWebmSrc = webm.src;
	vidMp4Src = vidMp4Src.replace('.mp4','');
	vidWebmSrc = vidWebmSrc.replace('.webm','');
	loader = document.getElementById('loader');
	seekSlider = document.getElementById('seek-slider');
	highQual = document.getElementById('high-quality');
	normalQual = document.getElementById('normal-quality');
	lowQual = document.getElementById('low-quality');
	videoControls = document.getElementById('vid-controls');
	playPauseBtn = document.getElementById('play-pause');
	muteBtn = document.getElementById('mute-icon');
	bufferedAmount = document.getElementById('buffered');
	currentProgress =  document.getElementById('current-progress');
	videoTimeLenght = document.getElementById('video-time-lenght');
	_time = document.getElementById('time');
	fullscreenVid =  document.getElementById('fullscreen');
	progWidth = document.getElementById('progressbar').offsetWidth;
	progress = document.getElementById('current-progress').offsetWidth;
	play = document.getElementById('play-icon');
	mediaPlayer.controls = false;
	playPauseBtn.addEventListener('click',togglePlayPause, false);
	muteBtn.addEventListener('click',toggleMute, false);
	highQual.addEventListener('click',highQuality, false);
	normalQual.addEventListener('click',normalQuality, false);
	lowQual.addEventListener('click',lowQuality, false);
	$(normalQual).css({'color':'#fc8b02'});
	mediaPlayer.addEventListener('timeupdate', seekTimeUpdate, false); //updateProgressBar
	mediaPlayer.addEventListener('play', function() {
		changeButtonType(playPauseBtn, 'player pause', 'Pause');
	}, false);

	mediaPlayer.addEventListener('pause', function() {
		changeButtonType(playPauseBtn, 'player play', 'Play');
	}, false);
	
	mediaPlayer.addEventListener('volumechange', function(e){ 
		if (mediaPlayer.muted) {changeButtonType(muteBtn, 'player sound-off', 'Unmute');}
		else {changeButtonType(muteBtn, 'player sound-on', 'Mute'); }
	}, false);	
	mediaPlayer.addEventListener('ended', function(){ 
		$('.play-icon').fadeIn(500);
		videoPlaying = false;
		changeButtonType(playPauseBtn, 'glyphicon glyphicon-repeat video-replay', 'Replay');
		if(videoAutoplay == 1) loadNextVideo();
		
	}, false);
	fullscreenVid.addEventListener('click', toggleFullScreen, false); //fullscreen toggleFullScreen
	mediaPlayer.addEventListener('loadedmetadata', metadata, false);
	mediaPlayer.addEventListener('error', hasError, false);
	mediaPlayer.addEventListener('canplay', canPlayVid, true);
	mediaPlayer.addEventListener('canplaythrough', canPlayVid, false);
	if(document.cookie.length != 0){
		var vol = getCookie('volume');
		document.getElementById('volume-vertical').style.height = vol * 100 + '%';
		mediaPlayer.volume = vol;
	}else{
		vol = 1;
		document.getElementById('volume-vertical').style.height = vol * 100 + '%';
		mediaPlayer.volume = vol;
	}
	if(document.cookie.indexOf('speed') > 0){
		var speed = getCookie('speed');
		mediaPlayer.playbackRate = speed;
	}
	if(document.cookie.indexOf('videoAutoplay') > 0){
		videoAutoplay = getCookie('videoAutoplay');
		if(videoAutoplay==0){
			$('#next-video-autoplay').fadeOut('fast');
			$('div.settings ul li.autoplay-toggle span').html('Off');
			$('div.settings ul li.autoplay-toggle span').removeClass('label label-primary');
		    $('div.settings ul li.autoplay-toggle span').addClass('label label-default');
		}
		else {
			$('#next-video-autoplay').fadeIn();
			$('div.settings ul li.autoplay-toggle span').html('On');
			$('div.settings ul li.autoplay-toggle span').removeClass('label label-default');
		    $('div.settings ul li.autoplay-toggle span').addClass('label label-primary');
		}

	}
	if(document.cookie.indexOf('annotationAutoplay') > 0){
		annotationAutoplay = getCookie('annotationAutoplay');
		if(annotationAutoplay==0){
			$('div.settings ul li.annot-toggle span').html('Off');
			$('div.settings ul li.annot-toggle span').removeClass('label label-primary');
		    $('div.settings ul li.annot-toggle span').addClass('label label-default');
		}
		else {
			$('div.settings ul li.annot-toggle span').html('On');
			$('div.settings ul li.annot-toggle span').removeClass('label label-default');
		    $('div.settings ul li.annot-toggle span').addClass('label label-primary');
		}
	}
}

function metadata(){
	timeDuration = Math.round(mediaPlayer.duration);
	timeSettings();
}
function checkInternet(){
	var online = navigator.onLine;
	return online;
}
function buffering(){
	$('#loader').fadeIn();
}
function stopBuffering(){
	$('#loader').fadeOut();
}
function loadBuffer(){
	if(mediaPlayer.buffered.length > 0){
		buffPercent = mediaPlayer.buffered.end(0);
		percentLoaded = Math.floor((buffPercent / mediaPlayer.duration) * 100);
		$('#buffered').css({'width': percentLoaded + '%'});
	}
	checkBuff();
}
function checkBuff(){
	var checkInterval  = 150.0,
	 lastPlayPos    = 0,
	 currentPlayPos = 0,
	 bufferingDetected = false;
	setInterval(checkBuffering, checkInterval);
	function checkBuffering() {
	    currentPlayPos = mediaPlayer.currentTime;
	    var offset = 1 / checkInterval;
	    if (
	            !bufferingDetected 
	            && currentPlayPos < (lastPlayPos + offset)
	            && !mediaPlayer.paused
	        ) {
	        console.log('buffering...');
	        bufferingDetected = true;
	        $('.play-icon').fadeOut();
			$('#loader').fadeIn();
	    }
	    if (
	        bufferingDetected 
	        && currentPlayPos > (lastPlayPos + offset)
	        && !mediaPlayer.paused
	        ) {
	        console.log("not buffering...");
	        bufferingDetected = false;
	        $('#loader').fadeOut('fast');
	    }
	    lastPlayPos = currentPlayPos;
	}
}
function canPlayVid() { 
	$(loader).fadeOut();
}
function hasError(){
	$('#error-video').html(errorMsg).css({'color':'#fff'});
}

function changeVidQuality(mp4Ext,webmExt,oggExt){
	videoCurrentTime = mediaPlayer.currentTime;
	$('#error-video').fadeIn();
	$('#error-video').html('Please wait...').css({'color':'#fff','text-align':'center'});
	var newSrc;
	newSrc = vidMp4Src+mp4Ext;mp4.setAttribute('src', newSrc);
	newSrc = vidWebmSrc+webmExt;webm.setAttribute('src', newSrc);
	//newSrc = vidOggSrc+oggExt;ogg.setAttribute('src', newSrc);
	if(mediaPlayer.canPlayType("video/mp4")){
		mp4.addEventListener('error', checkVideo, false);
	}else if(mediaPlayer.canPlayType("video/webm")){
		webm.addEventListener('error', checkVideo, false);
	}
	 //else if(mediaPlayer.canPlayType("video/ogg")){
	// 	ogg.addEventListener('error', checkVideo, false);
	// }
	mediaPlayer.currentTime = videoCurrentTime;
	mediaPlayer.pause(); mediaPlayer.load();  mediaPlayer.play();
	mediaPlayer.addEventListener('canplaythrough', function(){
		$('#error-video').fadeOut();
	},false);
	mediaPlayer.addEventListener('canplay', function(){
		$('#error-video').fadeOut();
	}, false);

}
function highQuality(e){
	e.preventDefault();$('#play-icon').fadeOut('fast');$(loader).fadeIn('fast');$(highQual).css({'color':'#fc8b02'});$(normalQual).css({'color':'#fff'});$(lowQual).css({'color':'#fff'});
	changeVidQuality('_hd.mp4','_hd.webm','_hd.ogg');
	//var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0, isFirefox = typeof InstallTrigger !== 'undefined', isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0, isChrome = !!window.chrome && !isOpera, isIE = /*@cc_on!@*/false || !!document.documentMode;  
}
function normalQuality(e){
	e.preventDefault();$('#play-icon').fadeOut('fast');$(loader).fadeIn('fast');$(highQual).css({'color':'#fff'});$(normalQual).css({'color':'#fc8b02'});$(lowQual).css({'color':'#fff'});
	changeVidQuality('.mp4','.webm','.ogg');
}
function lowQuality(e){
	e.preventDefault();$('#play-icon').fadeOut('fast');$(loader).fadeIn('fast');$(highQual).css({'color':'#fff'});$(normalQual).css({'color':'#fff'});$(lowQual).css({'color':'#fc8b02'});
	changeVidQuality('_low.mp4','_low.webm','_low.ogg');
}
function checkVideo(){
	$(loader).fadeOut('fast');
	$('#error-video').html(vidMsg).css({'color':'#fff'});
}
function hideLoader(){
	$(loader).fadeIn();
}
function seekTimeUpdate(){
	updProgWidth = mediaPlayer.currentTime * (100 / mediaPlayer.duration);
	$('#current-progress').css({'width' : updProgWidth + '%', 'position' : 'relative'});
	handle = Math.floor(updProgWidth / mediaPlayer.duration * progWidth);
	$('#button-progress').css({'left' : '99%', 'position' : 'absolute'});
	curHrs = Math.floor(mediaPlayer.currentTime / 3600);
	curMin = Math.floor(mediaPlayer.currentTime / 60);
	curMinutes = Math.floor(curMin - (curHrs * 60));
	curSec = Math.floor(mediaPlayer.currentTime - (curMin * 60));
	durHrs = Math.floor(mediaPlayer.duration / 3600);
	durMin = Math.floor(mediaPlayer.duration / 60);
	durMinutes = Math.floor(mediaPlayer.duration / 60);
    durMin = durMin - (durHrs*60); 
	durSec = Math.floor(mediaPlayer.duration - (durMinutes * 60));
	if(curSec < 10){curSec = "0"+curSec;}
	if(durSec < 10){durSec = "0"+durSec;}
	if(Math.floor(mediaPlayer.duration) >= 3600){
		if(curMinutes<10)curMinutes = '0' + curMinutes;
		_time.innerHTML = curHrs + ':' + curMinutes + ':' + curSec + '/' + durHrs + ':' + durMin + ':' + durSec;
	}else{
		_time.innerHTML = curMin + ':' + curSec + '/' + durMin + ':' + durSec;
	}
	// if(Math.floor(mediaPlayer.currentTime) == adsTime && role == 3 || role == 5) {
	// 	document.getElementById('advertisement').style.visibility = 'visible';
	// 	if(!hideControls) $('#advertisement').css({'margin-bottom':'50px'});
	// 	else $('#advertisement').css({'margin-bottom':'2px'});
	// 	$('#advertisement').fadeIn(1000);
	// }
	if(Math.floor(mediaPlayer.currentTime) == adsTime) {
		document.getElementById('advertisement').style.visibility = 'visible';
		if(!hideControls) $('#advertisement').css({'margin-bottom':'50px'});
		else $('#advertisement').css({'margin-bottom':'2px'});
		$('#advertisement').fadeIn(1000);
	}
	checkVid();
	loadBuffer();
	if(countAnnotation > 0 && annotationAutoplay == 1) annotation.show();
	
	
}

function checkVid(){
	if(isNaN(durSec)){
		$('.ctime').html('');
		$('#error-video').html(vidMsg).css({'color':'#fff','text-align':'center'});
		$('#error-video').fadeIn();	
		$(loader).fadeOut('fast');	
		//seekSlider.value=0;
		setTimeout(function(){
			$('#error-video').fadeOut();	
			// $('#error-video').html('');
		}, 5000);
	}else{
		$(loader).fadeOut('fast');
	}
}

function toggleFullScreen() {
  if (!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods
  	if (mediaPlayer.requestFullscreen) {
  		mediaPlayer.requestFullscreen();
  	} else if (mediaPlayer.msRequestFullscreen) {
  		mediaPlayer.msRequestFullscreen();
  	} else if (mediaPlayer.mozRequestFullScreen) {
  		videoControls.mozRequestFullScreen();
  	} else if (mediaPlayer.webkitRequestFullscreen) {
  		mediaPlayer.webkitRequestFullscreen();
        mediaPlayer.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
      //videoFullScreen.request(document.getElementById('media-video'));
  }
} else {
	if (document.exitFullscreen) {
		document.exitFullscreen();
	} else if (document.msExitFullscreen) {
		document.msExitFullscreen();
	} else if (document.mozCancelFullScreen) {
		document.mozCancelFullScreen();
	} else if (document.webkitExitFullscreen) {
		document.webkitExitFullscreen();
	}
}
}

function adsLine(){
	ads = (adsTime / duration) * 100;
	$('<div class="ads"> <div style="z-index:1111;background:#51ea04;position:absolute;right:0;height:100%;width:5px;"></div></div>').prependTo('#progress-ads-line');
	$('.ads').css({'border-radius':'2px', 'background':'transparent','width': ads + '%', 'height':'100%', 'position':'absolute'});
}
function timeSettings(){
	vidMinLenght = Math.floor(mediaPlayer.duration / 60);
	vidSecLenght = Math.floor(mediaPlayer.duration - (vidMinLenght * 60));
	hrs = Math.floor(vidMinLenght / 60);
	mins =  (vidMinLenght - (hrs * 60));
	secs =   Math.floor(mediaPlayer.duration - (vidMinLenght * 60));
	if(secs < 10) { secs = '0'+ secs; }
	if(vidSecLenght < 10) { vidSecLenght = '0'+ vidSecLenght; }
	if(mins < 10) { mins = '0'+ mins; }
	if(hrs < 10) { hrs = '0'+ hrs; }
	if(timeDuration < 3600){
		$('.ctime').html(vidMinLenght + ':' + vidSecLenght);
	}else{
		$('.ctime').html(hrs + ':' + mins + ':' + secs);
	}
	
}
function togglePlayPause(){
	if (mediaPlayer.paused || mediaPlayer.ended) {
		changeButtonType(playPauseBtn, 'player pause', 'Pause');
		mediaPlayer.play();
		videoPlaying = true;
		playIcon = false;
		$('.play-icon').fadeOut(500);
	}else {
		changeButtonType(playPauseBtn, 'player play','Play');
		mediaPlayer.pause();
		videoPlaying = false;
		playIcon=true;
		$('.play-icon').fadeIn(500);
		
	}
}

function stopPlayer() {
	mediaPlayer.pause();
	mediaPlayer.currentTime = 0;
}
function toggleMute() {
	if (mediaPlayer.muted) {
		changeButtonType(muteBtn, 'player sound-on','Mute');
		mediaPlayer.muted = false;
		mediaPlayer.volume = 1;
		$('#volume-vertical').css({'height':  mediaPlayer.volume * 100+'%'});
	}
	else {
		changeButtonType(muteBtn,'player sound-off', 'Unmute');
		mediaPlayer.muted = true;
		mediaPlayer.volume = 0;
		$('#volume-vertical').css({'height':mediaPlayer.volume * 100+'%'});
	}
}

function replayMedia() {
	resetPlayer();
	mediaPlayer.play();
}

function changeButtonType(btn, toggleclass, title) {
	btn.title = title;
	btn.className = toggleclass;
}

function loadNextVideo() {
	// for (var i = 0; i < arguments.length; i++) {
	// 	var file = arguments[i].split('.');
	// 	var ext = file[file.length - 1];
	// 	if (canPlayVideo(ext)) {
	// 		resetPlayer();
	// 		mediaPlayer.src = arguments[i];
	// 		mediaPlayer.load();
	// 		break;
	// 	}
	// }
	var nextVid = document.getElementById('videourl1').href;
	window.location.href = nextVid;
}
function canPlayVideo(ext) {
	var ableToPlay = mediaPlayer.canPlayType('video/' + ext);
	if (ableToPlay == '') return false;
	else return true;
}
function resetPlayer(){
	mediaPlayer.currentTime = 0;
	changeButtonType(playPauseBtn, 'player play', 'Play');
}
function fullscreen(){
	videoFullScreen.request(document.getElementById('media-video'));
//screenfull.request($('.wrapper')[0]);		
}
function videoForwardBackward(e){
	mouseX = e.pageX - $('#current-progress').offset().left;
	currentTime = (Math.floor(mouseX) /  Math.floor(progWidth)) * Math.floor(mediaPlayer.duration);
	mediaPlayer.currentTime = currentTime;
}
function timeoutMouseMove(milliseconds){
	clearTimeout(timeout);
	timeout = setTimeout(function(){
		$('#controls').fadeOut(500);
		$('#ads-hide').css({'bottom':'2px'});
		$('#advertisement').css({'margin-bottom':'2px'});
	}, milliseconds);
}
function setVolume(e){
	mouseY = Math.floor($('.volume-static-holder').height() - (e.pageY - $('.volume-static-holder').offset().top));
	if(mouseY > 100) {mediaPlayer.volume = 1;mouseY=100;}
	else if(mouseY < 0) {mediaPlayer.volume = 0;mouseY=0;}
	$('#volume-vertical').css({'height' : mediaPlayer.volume * 100 +'%'});
	$('#volume-button').css({'top' : '0%'});
	mediaPlayer.volume = mouseY/100;
}
function incView(filename){
	if(seen == false){
		seen = true;
		setTimeout(function(){
			$.ajax({
				type 	:'POST',
				url  	: 'v/increment-view/'+filename,
				data 	: {view:'graldburasca'},
				success : function(e){
					console.log('v+1');
				},
				error   : function(e,status,error){
					console.log(error);
				}
			});
		},10000);
	}
}
function storeVolume(volume, expireDays){
	var d = new Date();
    d.setTime(d.getTime() + (expireDays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = "volume=" + volume + ";" + expires;
}
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
}
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
}
var videoPlayer = function(){
	return{
			speed : function(name,value,days){
				setCookie(name,value,days);
		    },
		    cookies : function(name,value,days){
		    	setCookie(name,value,days);
		    }
	}
}();

$('#media-video').bind("contextmenu", function(){
	return false;
});
$('#media-video').bind('ended', function(){
	if(!this.paused) this.pause();
});
$('#media-video').bind('progress', function(){
	loadBuffer();
});
$('#media-video').bind('loadeddata', function(){
	loadBuffer();
});
$('#media-video').bind('canplaythrough', function(){
	//loadBuffer();
});
mediaPlayer.addEventListener('playing', function(){
	stopBuffering();
});
mediaPlayer.addEventListener('waiting', function(){
	buffering();
});
mediaPlayer.addEventListener('dblclick',function(){
	toggleFullScreen();
});
$('#media-video').bind('error', function(){
	$('#error-video').html(errorMsg).css({'color':'#fff'});
});
$('#mute-icon').hover(function(){
	soundHover=true;
	if(soundHover==true){
		$('.volume').fadeIn(1000);	
		setTimeout(function(){
			$('.volume').fadeOut(500);
		},15000);
	}	
});
// $('.volume, .volume-static-holder, #volume-vertical').hover(function(){	
// 	soundHover=false;
// });
// $('.volume').mouseleave(function(){
// 	if(soundHover==false){
// 		$('.volume').fadeOut(1000);
// 	}
// });
$('#volume-button').mousedown(function(e){
	mouseMoving = true;
	$('body').css({'cursor':'pointer'});
});
$('#volume-vertical').click(function(e){
	setVolume(e);
});
$('.volume-static-holder').click(function(e){
	setVolume(e);
});
$('#progressbar,#buffered,#current-progress').bind('click', function(e) {	
	videoForwardBackward(e);	
});
$('#button-progress').mousedown(function(e) {	
	$('body').css({'cursor':'pointer'});
	progressHandle = true;
});
$('html, body').mouseup(function(e) {	
	progressHandle = false;
	mouseMoving = false;
	$('body').css({'cursor':'default'});
});
$('html, body').mousemove(function(e){
	if(mouseOverPlayer){
		$('#controls').fadeIn(500);
		hideControls=false;
		$('#ads-hide').css({'bottom':'50px'});
		$('#advertisement').css({'margin-bottom':'50px'});
	}else{
		$('#controls').fadeOut('fast');
		hideControls=true;
		$('#ads-hide').css({'bottom':'2px'});
		$('#advertisement').css({'margin-bottom':'2px'});
	}
	timeoutMouseMove(5000);
	if(progressHandle){
		var currentTimeDrag = e.pageX - $('#current-progress').offset().left,
		currentTime = (Math.floor(currentTimeDrag) /  Math.floor(progWidth)) * Math.floor(mediaPlayer.duration);
		//if(currentTime>mediaPlayer.currentTime) {mediaPlayer.currentTime = currentTime;}
		//else {mediaPlayer.currentTime = currentTime;}
		mediaPlayer.currentTime = currentTime;
	}
	if(mouseMoving){
		mouseY = Math.floor($('.volume-static-holder').height() - (e.pageY - $('.volume-static-holder').offset().top));
		if(mouseY > 100) {mediaPlayer.volume = 1; mouseY=100;}
		else if(mouseY < 0) {mediaPlayer.volume = 0; mouseY=0;}
		$('#volume-vertical').css({'height' : mediaPlayer.volume * 100 + '%'});
		$('#volume-button').css({'top' :  '0%'});
		mediaPlayer.volume = (mouseY / 100);
		storeVolume(mediaPlayer.volume,5);
	}
});

$('#hd-setting').bind('click', function(){
	$('.settings').toggle();
	$('.share-video').fadeOut('fast');
	$('.hd-setting').fadeOut('fast');
	$('.video-speed').fadeOut('fast');
	setTimeout(function(){
		$('.settings').fadeOut();
	},15000);
});
$('div.settings ul li.quality').click(function(){
	$('.hd-setting').fadeIn(500);
	$('.settings').fadeOut();
	$('.share-video').fadeOut();
});
$('div.settings ul li.speed').click(function(){
	$('.video-speed').fadeIn(500);
	$('.settings').fadeOut();
	$('.share-video').fadeOut();
	$('.hd-setting').fadeOut();
});
$('div.settings ul li.annot-toggle').click(function(){
	if(annotationAutoplay==0){
		videoPlayer.cookies('annotationAutoplay',1,7);
		annotationAutoplay = 1;
		$('div.settings ul li.annot-toggle span').html('On');
		$('div.settings ul li.annot-toggle span').removeClass('label label-default');
		$('div.settings ul li.annot-toggle span').addClass('label label-primary');
	}
	else {
		videoPlayer.cookies('annotationAutoplay',0,7);
		annotationAutoplay = 0;
		$('div.settings ul li.annot-toggle span').html('Off');
		$('div.settings ul li.annot-toggle span').removeClass('label label-primary');
		$('div.settings ul li.annot-toggle span').addClass('label label-default');
	}
});
$('div.settings ul li.autoplay-toggle').click(function(){
	if(videoAutoplay==1){
		videoPlayer.cookies('videoAutoplay',0,7);
		videoAutoplay = 0;
		$('#next-video-autoplay').fadeOut();
		$('div.settings ul li.autoplay-toggle span').html('Off');
		$('div.settings ul li.autoplay-toggle span').removeClass('label label-primary');
		$('div.settings ul li.autoplay-toggle span').addClass('label label-default');
	}
	else {
		videoPlayer.cookies('videoAutoplay',1,7);
		videoAutoplay = 1;
		$('#next-video-autoplay').fadeIn();
		$('div.settings ul li.autoplay-toggle span').html('On');
		$('div.settings ul li.autoplay-toggle span').removeClass('label label-default');
		$('div.settings ul li.autoplay-toggle span').addClass('label label-primary');
	}
});
$('.back-to-setting').click(function(){
	$('.hd-setting').fadeOut();
	$('.settings').fadeOut();
	$('.share-video').fadeOut();
	$('.video-speed').fadeOut();
	$('.settings').fadeIn();
});
$('#share-video').bind('click', function(){
	$('.share-video').toggle();
	$('.hd-setting').fadeOut();
});
$('#speed-high,#speed-normal,#speed-low,#speed-v-low').click(function(){
	var id = this.id;
	if(id=='speed-high'){
		mediaPlayer.playbackRate = 2;
		$(this).css({'color':'#fc8b02'});
		$('#speed-normal').css({'color':'#e2d9d9'});
		$('#speed-low').css({'color':'#e2d9d9'});
		$('#speed-v-low').css({'color':'#e2d9d9'});
		videoPlayer.speed('speed',2,7);
	}
	else if(id=='speed-normal'){
		mediaPlayer.playbackRate = 1;
		$('#speed-high').css({'color':'#e2d9d9'});
		$(this).css({'color':'#fc8b02'});
		$('#speed-low').css({'color':'#e2d9d9'});
		$('#speed-v-low').css({'color':'#e2d9d9'});
		videoPlayer.speed('speed',1,7);
	}
	else if(id=='speed-low') {
		mediaPlayer.playbackRate = 0.5;
		$('#speed-high').css({'color':'#e2d9d9'});
		$('#speed-normal').css({'color':'#e2d9d9'});
		$(this).css({'color':'#fc8b02'});
		$('#speed-v-low').css({'color':'#e2d9d9'});
		videoPlayer.speed('speed',0.5,7);
	}
	else if(id=='speed-v-low') {
		mediaPlayer.playbackRate = 0.25;
		$('#speed-high').css({'color':'#e2d9d9'});
		$('#speed-normal').css({'color':'#e2d9d9'});
		$('#speed-low').css({'color':'#e2d9d9'});
		$(this).css({'color':'#fc8b02'});
		videoPlayer.speed('speed',0.25,7);
	}
});
$('.play-icon').bind('click', function(){
	togglePlayPause();
	if(playIcon==false){
		$(this).fadeOut(500);
		playIcon=true;
	}else{$('.play-icon').fadeIn(500);}	
	$('.play-icon').fadeOut(500);
});
$('#media-video').bind('click', function(){
	togglePlayPause();
	if(playIcon==true){
		$('.play-icon').fadeIn(500);
		playIcon=false;
	}else{$('.play-icon').fadeOut(500);playIcon=true;}
});
$('button.close-ads').bind('click', function(){
	$('#advertisement').fadeOut(500);
	$('#ads-hide').fadeIn();
});
$('#ads-hide').bind('click', function(){
	$('#advertisement').fadeIn(1000);
	$('#ads-hide').fadeOut();
});
$('#media-video, #controls, .play-icon, #ads-hide,#advertisement').mouseover(function(){
	mouseOverPlayer = true;
	//$('#advertisement').css({'margin-bottom':'50px'});
});
$('#media-video, #controls, .play-icon,#advertisement').mouseleave(function(){
	mouseOverPlayer = false;
	//$('#advertisement').css({'margin-bottom':'2px'});
});


/****
* This video player is not compatible for EI browser :( sorry
* Author by: G-rald Burasca
* wanna know more about me just visit my site at w3.geraldburasca.com (coming soooon.........)
* feel free to contact me gerald.burasca27@gmail.com
* Created on Feb. 2015 - present
****/
