
/****
* This player is not compatible for EI browser :( sorry
* Author by: G-rald Burasca
* wanna know more about me just visit my site at w3.geraldburasca.com (coming soooon.........)
* feel free to contact me gerald.burasca27@gmail.com
* Created on Feb. 2015 - present
****/
$('#controls').hide();$('#ads-hide').hide();$('#loader').fadeIn(); 
var getCurrentPath = window.location.pathname.split( '/' );

$(document).ready(function(){
	$('#controls').fadeIn();
	$('#loader').fadeOut(); 
	document.getElementById('media-video').play();
	if(getCurrentPath.indexOf('watch') === -1)
	{
	  alert("no dash found.");
	}
});
document.addEventListener("DOMContentLoaded", function() {main();}, false);
var mediaPlayer, percentageloaded, handle, timeout, progressHandle=false, hideControls = false, mouseOverPlayer=false, progWidth, retry, mp4, webm, ogg, vidMp4Scr,vidWebmScr,vidOggScr, buffPercent, percentLoaded, loader, progress, hrs=0, mins=0, secs=0, tmpSecs=0, adsTime = 10, ads=0, vidMinLenght=0, vidSecLenght=0, videoCurrentTime=0,playPauseBtn, timeDuration=0,muteBtn, playIcon = false, replay, _time, curHrs, curMin, curSec, durHrs, durMin, durSec,progressBar, soundHover = false, volumeHover = false, currentTime=0, videoPlaying = false, start = false, error = false,videoTimeLenght,volumes=0, volumeClick = false, mouseX = 0, mouseY = 0, volumeY=0, volumeDrag = false, progressbarClick = false,updProgWidth = 0, videoControls, volumeStatus, bufferedAmount, currentBuffered, currentProgress, playBtn, play, seekSlider,highQual,normalQual, lowQual, fullscreenVid, mouseMoving=false,videoQuality = {'9001p':'highres', '1080p':'hd1080', '720p':'hd720', '480p':'large', '360p':'medium', '240p':'small', '144p':'tiny'};
var errorMsg = 'An error occured please try again later.';
var vidMsg = 'Video is not ready please try again later.';
var notifyMsg = 'Your video is saved we will notify you when your video is ready.';
var connectionMsg = 'You have no internet connection.';
var player = {
	volume       : '1',
	fullscreen   : true,
	videoQuality : function(e){
		return this.volume;
	}
};
function main(){
	mp4 = document.getElementById('mp4');
	webm = document.getElementById('webm');
	// ogg = document.getElementById('ogg');
	vidMp4Src = mp4.src;vidWebmSrc = webm.src;//vidOggSrc = ogg.src;
	vidMp4Src = vidMp4Src.replace('.mp4','');
	vidWebmSrc = vidWebmSrc.replace('.webm','');
	//vidOggSrc = vidOggSrc.replace('.ogg','');
	// retry = document.getElementById('retry-error');
	loader = document.getElementById('loader');
	seekSlider = document.getElementById('seek-slider');
	highQual = document.getElementById('high-quality');
	normalQual = document.getElementById('normal-quality');
	lowQual = document.getElementById('low-quality');
	mediaPlayer = document.getElementById('media-video');
	videoControls = document.getElementById('vid-controls');
	playPauseBtn = document.getElementById('play-pause');
	muteBtn = document.getElementById('mute-icon');
	bufferedAmount = document.getElementById('buffered');
	currentProgress =  document.getElementById('current-progress');
	videoTimeLenght = document.getElementById('video-time-lenght');
	volumeStatus = document.getElementById('volume');
	_time = document.getElementById('time');
	fullscreenVid =  document.getElementById('fullscreen');
	progWidth = document.getElementById('progressbar').offsetWidth;
	progress = document.getElementById('current-progress').offsetWidth;
	play = document.getElementById('play-icon');
	mediaPlayer.controls = false;
	playPauseBtn.addEventListener('click',togglePlayPause, false);
	muteBtn.addEventListener('click',toggleMute, false);
	highQual.addEventListener('click',highQuality, false);
	normalQual.addEventListener('click',normalQuality, false);
	lowQual.addEventListener('click',lowQuality, false);
	//retry.addEventListener('click',normalQuality, false);
	bufferedAmount.addEventListener('click',vidSeek, false);
	seekSlider.addEventListener('change',vidSeek, false);
	$(normalQual).css({'color':'#fc8b02'});
	mediaPlayer.addEventListener('timeupdate', seekTimeUpdate, false); //updateProgressBar
	
	mediaPlayer.addEventListener('play', function() {
		changeButtonType(playPauseBtn, 'player pause', 'Pause');
	}, false);

	mediaPlayer.addEventListener('pause', function() {
		changeButtonType(playPauseBtn, 'player play', 'Play');
	}, false);
	
	mediaPlayer.addEventListener('volumechange', function(e){ 
		if (mediaPlayer.muted) {changeButtonType(muteBtn, 'player sound-off', 'Unmute');}
		else {changeButtonType(muteBtn, 'player sound-on', 'Mute'); }
	}, false);	

	mediaPlayer.addEventListener('ended', function(){ 
		$('.play-icon').fadeIn(500);
		$(loader).fadeOut();
		videoPlaying = false;
	}, false);

	mediaPlayer.addEventListener('loadedmetadata', metadata, false);
	fullscreenVid.addEventListener('click', toggleFullScreen, false); //fullscreen toggleFullScreen
	volumeStatus.addEventListener('change', setVolume, false);
	mediaPlayer.addEventListener('error', hasError, false);
	mediaPlayer.addEventListener('canplay', canPlayVideo, false);
	mediaPlayer.addEventListener('canplaythrough', canPlayVideo, false);
}
function metadata(){
	timeDuration = Math.round(mediaPlayer.duration);
	timeSettings();
	adsOn();
}
function checkInternet(){
	var online = navigator.onLine;
	return online;
}

function loadBuffer(){
	if(mediaPlayer.buffered.length > 0){
		buffPercent = mediaPlayer.buffered.end(0);
		percentLoaded = Math.floor((buffPercent / mediaPlayer.duration) * 100);
		//percentageloaded = Math.round(percentLoaded / percentLoaded  * 100);
		$('#buffered').css({'width': percentLoaded + '%'});
		if(Math.round(updProgWidth) >= percentLoaded){
			$('.play-icon').fadeOut();
			$(loader).fadeIn();
		}
		else{
			$(loader).fadeOut();
		}

	}
	// if(mediaPlayer.networkState === mediaPlayer.NETWORK_LOADING){
	// 	$('.play-icon').fadeOut();
	// 	$(loader).fadeIn();
	//    }
	// else{
	//    	 $(loader).fadeOut();
	//    }
	// if(mediaPlayer.networkState === mediaPlayer.HAVE_ENOUGH_DATA){
	//    	$(loader).fadeOut();
	//    }
	
}
function canPlayVideo() { 
	$(loader).fadeOut();
	loadBuffer();
}
function onWaitingBuffer() { 
	
}
function hasError(){
  $('#error-video').html(errorMsg).css({'color':'#fff'});
}
function seekingNewPosition() { //find new position
    var seekTo = mediaPlayer.duration * (seekSlider.value / 100);
	mediaPlayer.currentTime = seekTo;
}

function changeVidQuality(mp4Ext,webmExt,oggExt){
	$('#error-video').fadeIn();
	$('#error-video').html('Please wait...').css({'color':'#fff','text-align':'center'});
	var newSrc;
	newSrc = vidMp4Src+mp4Ext;mp4.setAttribute('src', newSrc);
	newSrc = vidWebmSrc+webmExt;webm.setAttribute('src', newSrc);
	//newSrc = vidOggSrc+oggExt;ogg.setAttribute('src', newSrc);
	if(mediaPlayer.canPlayType("video/mp4")){
		mp4.addEventListener('error', checkVideo, false);
	}else if(mediaPlayer.canPlayType("video/webm")){
		webm.addEventListener('error', checkVideo, false);
	 }
	 //else if(mediaPlayer.canPlayType("video/ogg")){
	// 	ogg.addEventListener('error', checkVideo, false);
	// }
 	mediaPlayer.pause();mediaPlayer.load();mediaPlayer.play();
    mediaPlayer.addEventListener('canplaythrough', function(){
    	$('#error-video').fadeOut();
    },false);
    mediaPlayer.addEventListener('canplay', function(){
    	$('#error-video').fadeOut();
    }, false);
    
}
function highQuality(e){
	e.preventDefault();$('#play-icon').fadeOut('fast');$(loader).fadeIn('fast');$(highQual).css({'color':'#fc8b02'});$(normalQual).css({'color':'#fff'});$(lowQual).css({'color':'#fff'});
	changeVidQuality('_hd.mp4','_hd.webm','_hd.ogg');
	//var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0, isFirefox = typeof InstallTrigger !== 'undefined', isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0, isChrome = !!window.chrome && !isOpera, isIE = /*@cc_on!@*/false || !!document.documentMode;  
}
function normalQuality(e){
	e.preventDefault();$('#play-icon').fadeOut('fast');$(loader).fadeIn('fast');$(highQual).css({'color':'#fff'});$(normalQual).css({'color':'#fc8b02'});$(lowQual).css({'color':'#fff'});
	changeVidQuality('.mp4','.webm','.ogg');
}
function lowQuality(e){
	e.preventDefault();$('#play-icon').fadeOut('fast');$(loader).fadeIn('fast');$(highQual).css({'color':'#fff'});$(normalQual).css({'color':'#fff'});$(lowQual).css({'color':'#fc8b02'});
	changeVidQuality('_low.mp4','_low.webm','_low.ogg');
}
function checkVideo(){
	$(loader).fadeOut('fast');
	$('#error-video').html(vidMsg).css({'color':'#fff'});
}
function hideLoader(){
	$(loader).fadeIn();
}
function vidSeek(){
	var seekTo = mediaPlayer.duration * (seekSlider.value / 100);
	mediaPlayer.currentTime = seekTo;
}
function seekTimeUpdate(){
	updProgWidth = mediaPlayer.currentTime * (100 / mediaPlayer.duration);
	$('#current-progress').css({'width' : updProgWidth + '%', 'position' : 'relative'});
	 handle = Math.floor(updProgWidth / mediaPlayer.duration * progWidth);
	$('#button-progress').css({'left' : '99%', 'position' : 'absolute'});
	var currentSeek = mediaPlayer.currentTime * (100 / mediaPlayer.duration);
	seekSlider.value = currentSeek;
	 curHrs = Math.floor(mediaPlayer.currentTime / 3600);
	 curMin = Math.floor(mediaPlayer.currentTime / 60);
	 curSec = Math.floor(mediaPlayer.currentTime - (curMin * 60));
	 durHrs = Math.floor(curMin / 60);
	 durMin = Math.floor(mediaPlayer.duration / 60);
	 durSec = Math.floor(mediaPlayer.duration - (durMin  * 60));
	if(curSec < 10){curSec = "0"+curSec;}
	if(durSec < 10){durSec = "0"+durSec;}
	_time.innerHTML = curHrs + ':' + curMin + ':' + curSec + '/' + durHrs + ':' + durMin + ':' +durSec;
	if(timeDuration >= 3600){
		_time.innerHTML = curHrs + ':' + curMin + ':' + curSec + '/' + durHrs + ':' + durMin + ':' +durSec;
	}else{
		_time.innerHTML = curMin + ':' + curSec + '/' + durMin + ':' +durSec;
	}
	if(Math.floor(mediaPlayer.currentTime) == adsTime){
		$('.advertisement').fadeIn(1000);
	}
	checkVid();
	loadBuffer();
}

function checkVid(){
	if(isNaN(durSec)){
		$('.ctime').html('');
		$('#error-video').html(vidMsg).css({'color':'#fff','text-align':'center'});
		$('#error-video').fadeIn();	
		$(loader).fadeOut('fast');	
		seekSlider.value=0;
		setTimeout(function(){
			$('#error-video').fadeOut();	
			// $('#error-video').html('');
		}, 5000);
	}else{
		$(loader).fadeOut('fast');
	}
}

function toggleFullScreen() {
  if (!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods
    if (mediaPlayer.requestFullscreen) {
      mediaPlayer.requestFullscreen();
    } else if (mediaPlayer.msRequestFullscreen) {
      mediaPlayer.msRequestFullscreen();
    } else if (mediaPlayer.mozRequestFullScreen) {
      videoControls.mozRequestFullScreen();
    } else if (mediaPlayer.webkitRequestFullscreen) {
    	mediaPlayer.webkitRequestFullscreen();
      //mediaPlayer.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
      //videoFullScreen.request(document.getElementById('media-video'));
    }
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    }
  }
}

function adsOn(){
	ads = (adsTime / timeDuration) * 100;
	$('<div class="ads"> <div style="border-radius:2px;z-index:1111;background:yellow;position:absolute;right:0;height:100%;width:5px;"></div></div>').prependTo('#progress-ads-line');
	$('.ads').css({'border-radius':'2px', 'background':'transparent','width': ads + '%', 'height':'100%', 'position':'absolute'});
	
}
function timeSettings(){
	vidMinLenght = Math.floor(mediaPlayer.duration / 60);
	vidSecLenght = Math.round(mediaPlayer.duration - (vidMinLenght * 60));
	hrs = Math.floor(vidMinLenght / 60);
	mins =  (vidMinLenght - (hrs * 60));
	secs =   Math.floor(mediaPlayer.duration - (vidMinLenght * 60));
	if(secs < 10) { secs = '0'+ secs; }
	if(vidSecLenght < 10) { vidSecLenght = '0'+ vidSecLenght; }
	if(mins < 10) { mins = '0'+ mins; }
	if(hrs < 10) { hrs = '0'+ hrs; }
	if(timeDuration < 3600){
		$('.ctime').html(vidMinLenght + ':' + vidSecLenght);
	}else{
		$('.ctime').html(hrs + ':' + mins + ':' + secs);
	}
	
}
function toggleShowHanldeProgress(){
	// if(mediaPlayer.paused || mediaPlayer.ended){
	// 	$('#button-progress').fadeIn();
	// }else{
	// 	$('#button-progress').fadeOut();
	// }
}
function togglePlayPause(){
	if (mediaPlayer.paused || mediaPlayer.ended) {
		toggleShowHanldeProgress();
		changeButtonType(playPauseBtn, 'player pause', 'Pause');
		mediaPlayer.play();
		videoPlaying = true;
		playIcon = false;
		$('.play-icon').fadeOut(500);
	}else {
		changeButtonType(playPauseBtn, 'player play','Play');
		toggleShowHanldeProgress();
		mediaPlayer.pause();
		videoPlaying = false;
		playIcon=true;
		$('.play-icon').fadeIn(500);
		
	}
}

function stopPlayer() {
	mediaPlayer.pause();
	mediaPlayer.currentTime = 0;
}
function setVolume(){
	mediaPlayer.volume = volumeStatus.value / 100;
}
function toggleMute() {
	if (mediaPlayer.muted) {
		changeButtonType(muteBtn, 'player sound-on','Mute');
		mediaPlayer.muted = false;
		volumeStatus.value = 100; 
	}
	else {
		changeButtonType(muteBtn,'player sound-off', 'Unmute');
		mediaPlayer.muted = true;
		volumeStatus.value = 0;	
	}
}

function replayMedia() {
	resetPlayer();
	mediaPlayer.play();
}

function changeButtonType(btn, toggleclass, title) {
	btn.title = title;
	btn.className = toggleclass;
}

function loadVideo() {
	for (var i = 0; i < arguments.length; i++) {
		var file = arguments[i].split('.');
		var ext = file[file.length - 1];
		// Check if this media can be played
		if (canPlayVideo(ext)) {
			// Reset the player, change the source file and load it
			resetPlayer();
			mediaPlayer.src = arguments[i];
			mediaPlayer.load();
			break;
		}
	}
}
function canPlayVideo(ext) {
	var ableToPlay = mediaPlayer.canPlayType('video/' + ext);
	if (ableToPlay == '') return false;
	else return true;
}
function resetPlayer() {
	progress = 0;
	mediaPlayer.currentTime = 0;
	changeButtonType(playPauseBtn, 'player play', 'Play');
}
function fullscreen(){
videoFullScreen.request(document.getElementById('media-video'));
//screenfull.request($('.wrapper')[0]);		
}
function videoForwardBackward(e){
	mouseX = e.pageX - $('#current-progress').offset().left;
	currentTime = (Math.floor(mouseX) /  Math.floor(progWidth)) * Math.floor(mediaPlayer.duration);
	mediaPlayer.currentTime = currentTime;
}
function timeoutMouseMove(milliseconds){
	clearTimeout(timeout);
  	timeout = setTimeout(function(){$('#controls').fadeOut(500);$('#ads-hide').css({'bottom':'0px'});}, milliseconds);
}
function LetProcessYourVolume(e){
	volumeClick = true;
	mouseY = $('.volume-static-holder').height() - (e.pageY - $('.volume-static-holder').offset().top);
		if(mouseY < 0 || mouseY > $(this).height()) {
			volumeClick = false;
			return false;
		}
		$('#volume-vertical').css({'height' : mouseY+'px'});
		$('#volume-button').css({'top' : (mouseY-($('#volume-button').height()/2))+'px'});
		mediaPlayer.volume = $('#volume-vertical').height() / $(this).height();
		volumeY = $('#volume-vertical').height() / $(this).height();
		if($('#volume-vertical').height() < 15){
			$('#volume-button').css({'background':'red'});
			$('#volume-vertical').css('overflow','hidden');
		}else{
			$('#volume-button').css('background','#fff');
		}
}
$('#media-video').bind("contextmenu", function(){
	return false;
});
$('#media-video').bind('ended', function(){
	if(!this.paused) this.pause();
	$(loader).fadeOut();
});
$('#media-video').bind('progress', function(){
	loadBuffer();
});
$('#media-video').bind('loadeddata', function(){
	loadBuffer();
	adsOn();
});
$('#media-video').bind('canplaythrough', function(){
	loadBuffer();
});
$('#media-video').bind('playing', function(){
	loadBuffer();
});
$('#media-video').bind('error', function(){
	 $('#error-video').html(errorMsg).css({'color':'#fff'});
});
$('#mute-icon').hover(function(){
	soundHover=true;
	if(soundHover==true){
		$('.volume').fadeIn(1000);	
		setTimeout(function(){
			$('.volume').fadeOut(500);
		},7000);
	}	
});
$('.volume, .volume-static-holder, #volume-vertical').hover(function(){	
	soundHover=false;
});
$('.volume').mouseleave(function(){
	if(soundHover==false){
		$('.volume').fadeOut(1000);
	}
});

$('#volume-vertical').mousedown(function(e){
	LetProcessYourVolume(e)
});

$('.volume-static-holder').mousedown(function(e){
	LetProcessYourVolume(e);
});
$('#progressbar').bind('mousedown', function(e) {	
	videoForwardBackward(e);	
});
$('#buffered').bind('mousedown', function(e) {	
	videoForwardBackward(e);
});
$(currentProgress).bind('mousedown', function(e) {	
	videoForwardBackward(e);
});
$('#button-progress').mousedown(function(e) {	
	progressHandle = true;
});
$('html, body').mouseup(function(e) {	
	progressHandle = false;
});
$('html, body').mousemove(function(e){
	if(progressHandle==true){
		mouseX = e.pageX - $('#current-progress').offset().left;
		currentTime = (Math.floor(mouseX) /  Math.floor(progWidth)) * Math.floor(mediaPlayer.duration);
		if(currentTime>mediaPlayer.currentTime) {mediaPlayer.currentTime += 2;}
		else {mediaPlayer.currentTime -= 2;}
	}
});

$('#hd-setting').bind('click', function(){
  $('.hd-setting').toggle('show');
 $('.share-video').fadeOut();
});

$('#share-video').bind('click', function(){
  $('.share-video').toggle('show');
  $('.hd-setting').fadeOut();
});

$('.play-icon').bind('click', function(){
	togglePlayPause();
	if(playIcon==false){
		$(this).fadeOut(500);
		playIcon=true;
	}else{$('.play-icon').fadeIn(500);}	
	$('.play-icon').fadeOut(500);
});
$('#media-video').bind('click', function(){
	togglePlayPause();
	if(playIcon==true){
		$('.play-icon').fadeIn(500);
		playIcon=false;
	}else{$('.play-icon').fadeOut(500);playIcon=true;}
});
$('.close').bind('click', function(){
	$('.advertisement').fadeOut(500);
	$('#ads-hide').fadeIn();
});
$('#ads-hide').bind('click', function(){
	$('.advertisement').fadeIn(1000);
	$('#ads-hide').fadeOut();
});
$('#media-video, #controls, .play-icon').mouseover(function(){
	mouseOverPlayer = true;
});
$('#media-video, #controls, .play-icon').mouseleave(function(){
	mouseOverPlayer = false;
});
$('html, body').mousemove(function(){
	if(mouseOverPlayer){$('#controls').fadeIn(500);hideControls=false;}else{$('#controls').fadeOut('fast');hideControls=true;}
	timeoutMouseMove(5000);
	$('#ads-hide').css({'bottom':'50px'});
});

//function main(){mp4=document.getElementById("mp4"),webm=document.getElementById("webm"),vidMp4Src=mp4.src,vidWebmSrc=webm.src,vidMp4Src=vidMp4Src.replace(".mp4",""),vidWebmSrc=vidWebmSrc.replace(".webm",""),retry=document.getElementById("retry-error"),loader=document.getElementById("loader"),seekSlider=document.getElementById("seek-slider"),highQual=document.getElementById("high-quality"),normalQual=document.getElementById("normal-quality"),lowQual=document.getElementById("low-quality"),mediaPlayer=document.getElementById("media-video"),videoControls=document.getElementById("vid-controls"),playPauseBtn=document.getElementById("play-pause"),muteBtn=document.getElementById("mute-icon"),bufferedAmount=document.getElementById("buffered"),currentProgress=document.getElementById("current-progress"),videoTimeLenght=document.getElementById("video-time-lenght"),volumeStatus=document.getElementById("volume"),_time=document.getElementById("time"),fullscreenVid=document.getElementById("fullscreen"),progWidth=document.getElementById("progressbar").offsetWidth,progress=document.getElementById("current-progress").offsetWidth,play=document.getElementById("play-icon"),mediaPlayer.controls=!1,playPauseBtn.addEventListener("click",togglePlayPause,!1),muteBtn.addEventListener("click",toggleMute,!1),highQual.addEventListener("click",highQuality,!1),normalQual.addEventListener("click",normalQuality,!1),lowQual.addEventListener("click",lowQuality,!1),retry.addEventListener("click",normalQuality,!1),bufferedAmount.addEventListener("click",vidSeek,!1),seekSlider.addEventListener("change",vidSeek,!1),$(normalQual).css({color:"#fc8b02"}),mediaPlayer.addEventListener("timeupdate",seekTimeUpdate,!1),mediaPlayer.addEventListener("play",function(){changeButtonType(playPauseBtn,"player pause","Pause")},!1),mediaPlayer.addEventListener("pause",function(){changeButtonType(playPauseBtn,"player play","Play")},!1),mediaPlayer.addEventListener("volumechange",function(){mediaPlayer.muted?changeButtonType(muteBtn,"player sound-off","Unmute"):changeButtonType(muteBtn,"player sound-on","Mute")},!1),mediaPlayer.addEventListener("ended",function(){$(".play-icon").fadeIn(500),videoPlaying=!1},!1),mediaPlayer.addEventListener("loadedmetadata",metadata,!1),fullscreenVid.addEventListener("click",toggleFullScreen,!1),volumeStatus.addEventListener("change",setVolume,!1),mediaPlayer.addEventListener("error",hasError,!1),mediaPlayer.addEventListener("canplay",canPlayVideo,!1),mediaPlayer.addEventListener("canplaythrough",canPlayVideo,!1)}function metadata(){timeDuration=Math.round(mediaPlayer.duration),timeSettings(),adsOn()}function checkInternet(){var e=navigator.onLine;return e}function loadBuffer(){mediaPlayer.buffered.length>0&&(buffPercent=mediaPlayer.buffered.end(0),percentLoaded=Math.floor(buffPercent/mediaPlayer.duration*100),percentageloaded=Math.round(percentLoaded/percentLoaded*100),$("#buffered").css({width:percentLoaded+"%"})),mediaPlayer.networkState===mediaPlayer.NETWORK_LOADING?($(".play-icon").fadeOut(),$(loader).fadeIn()):(mediaPlayer.networkState===mediaPlayer.HAVE_ENOUGH_DATA,$(loader).fadeOut())}function canPlayVideo(){$(loader).fadeOut(),loadBuffer()}function onWaitingBuffer(){}function hasError(){$("#error-video").html("An error occured please try later.").css({color:"#fff"})}function seekingNewPosition(){var e=mediaPlayer.duration*(seekSlider.value/100);mediaPlayer.currentTime=e}function changeVidQuality(e,t){$("#error-video").fadeIn(),$("#error-video").html("Please wait...").css({color:"#fff"});var o;o=vidMp4Src+e,mp4.setAttribute("src",o),o=vidWebmSrc+t,webm.setAttribute("src",o),mediaPlayer.canPlayType("video/mp4")?mp4.addEventListener("error",checkVideo,!1):mediaPlayer.canPlayType("video/webm")&&webm.addEventListener("error",checkVideo,!1),mediaPlayer.pause(),mediaPlayer.load(),mediaPlayer.play(),mediaPlayer.addEventListener("canplaythrough",function(){$("#error-video").fadeOut()},!1),mediaPlayer.addEventListener("canplay",function(){$("#error-video").fadeOut()},!1)}function highQuality(e){e.preventDefault(),$("#play-icon").fadeOut("fast"),$(loader).fadeIn("fast"),$(highQual).css({color:"#fc8b02"}),$(normalQual).css({color:"#fff"}),$(lowQual).css({color:"#fff"}),changeVidQuality("_hd.mp4","_hd.webm","_hd.ogg")}function normalQuality(e){e.preventDefault(),$("#play-icon").fadeOut("fast"),$(loader).fadeIn("fast"),$(highQual).css({color:"#fff"}),$(normalQual).css({color:"#fc8b02"}),$(lowQual).css({color:"#fff"}),changeVidQuality(".mp4",".webm",".ogg")}function lowQuality(e){e.preventDefault(),$("#play-icon").fadeOut("fast"),$(loader).fadeIn("fast"),$(highQual).css({color:"#fff"}),$(normalQual).css({color:"#fff"}),$(lowQual).css({color:"#fc8b02"}),changeVidQuality("_low.mp4","_low.webm","_low.ogg")}function checkVideo(){$(loader).fadeOut("fast"),$("#error-video").html("Video is not ready please try later.").css({color:"#fff"})}function hideLoader(){$(loader).fadeIn()}function vidSeek(){var e=mediaPlayer.duration*(seekSlider.value/100);mediaPlayer.currentTime=e}function seekTimeUpdate(){updProgWidth=mediaPlayer.currentTime*(100/mediaPlayer.duration),$("#current-progress").css({width:updProgWidth+"%",position:"relative"}),handle=Math.floor(updProgWidth/mediaPlayer.duration*progWidth),$("#button-progress").css({left:"99%",position:"absolute"}),console.log(handle);var e=mediaPlayer.currentTime*(100/mediaPlayer.duration);seekSlider.value=e,curHrs=Math.floor(mediaPlayer.currentTime/3600),curMin=Math.floor(mediaPlayer.currentTime/60),curSec=Math.floor(mediaPlayer.currentTime-60*curMin),durHrs=Math.floor(curMin/60),durMin=Math.floor(mediaPlayer.duration/60),durSec=Math.floor(mediaPlayer.duration-60*durMin),10>curSec&&(curSec="0"+curSec),10>durSec&&(durSec="0"+durSec),_time.innerHTML=curHrs+":"+curMin+":"+curSec+"/"+durHrs+":"+durMin+":"+durSec,_time.innerHTML=timeDuration>=3600?curHrs+":"+curMin+":"+curSec+"/"+durHrs+":"+durMin+":"+durSec:curMin+":"+curSec+"/"+durMin+":"+durSec,Math.floor(mediaPlayer.currentTime)==adsTime&&$(".advertisement").fadeIn(2e3),checkVid(),loadBuffer()}function checkVid(){isNaN(durSec)?($(".ctime").html(""),$("#error-video").fadeIn(),$(loader).fadeOut("fast"),seekSlider.value=0):$(loader).fadeOut("fast")}function toggleFullScreen(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():mediaPlayer.requestFullscreen?mediaPlayer.requestFullscreen():mediaPlayer.msRequestFullscreen?mediaPlayer.msRequestFullscreen():mediaPlayer.mozRequestFullScreen?videoControls.mozRequestFullScreen():mediaPlayer.webkitRequestFullscreen&&mediaPlayer.webkitRequestFullscreen()}function adsOn(){ads=adsTime/timeDuration*100;Math.floor(progWidth/adsTime);$('<div class="ads"> <div style="z-index:1111;background:yellow;position:absolute;right:0;height:100%;width:5px;"></div></div>').prependTo("#progress-ads-line"),$(".ads").css({"border-radius":"2px",background:"transparent",width:ads+"%",height:"100%",position:"absolute"})}function timeSettings(){vidMinLenght=Math.floor(mediaPlayer.duration/60),vidSecLenght=Math.round(mediaPlayer.duration-60*vidMinLenght),hrs=Math.floor(vidMinLenght/60),mins=vidMinLenght-60*hrs,secs=Math.floor(mediaPlayer.duration-60*vidMinLenght),10>secs&&(secs="0"+secs),10>vidSecLenght&&(vidSecLenght="0"+vidSecLenght),10>mins&&(mins="0"+mins),10>hrs&&(hrs="0"+hrs),$(".ctime").html(3600>timeDuration?vidMinLenght+":"+vidSecLenght:hrs+":"+mins+":"+secs)}function toggleShowHanldeProgress(){mediaPlayer.paused||mediaPlayer.ended?$("#button-progress").fadeIn():$("#button-progress").fadeOut()}function togglePlayPause(){mediaPlayer.paused||mediaPlayer.ended?(toggleShowHanldeProgress(),changeButtonType(playPauseBtn,"player pause","Pause"),mediaPlayer.play(),videoPlaying=!0,playIcon=!1,$(".play-icon").fadeOut(500)):(changeButtonType(playPauseBtn,"player play","Play"),toggleShowHanldeProgress(),mediaPlayer.pause(),videoPlaying=!1,playIcon=!0,$(".play-icon").fadeIn(500))}function stopPlayer(){mediaPlayer.pause(),mediaPlayer.currentTime=0}function changeVolume(e){if("-"===e){var t=Math.floor(10);volume-=t,mediaPlayer.volume-=.1,$("#volume-vertical").css({height:volume+"%",background:"#337AB7"}),$(".volume-static-holder").css({overflow:"hidden"}),volume<10&&(volume=10,$("#volume-vertical").css({height:volume+"%",background:"#337AB7"}),$("#volume-button").css({background:"red"}),mediaPlayer.volume=0)}else{var o=Math.floor(10);volume+=o,mediaPlayer.volume+=.1,$("#volume-vertical").css({height:volume+"%",background:"#337AB7"}),$(".volume-static-holder").css({overflow:"hidden"}),volume>90&&(volume=100,$("#volume-vertical").css({height:volume+"%",background:"#337AB7"}),mediaPlayer.volume=1),volume>10&&$("#volume-button").css({background:"#fff"})}}function setVolume(){mediaPlayer.volume=volumeStatus.value/100}function toggleMute(){mediaPlayer.muted?(changeButtonType(muteBtn,"player sound-on","Mute"),mediaPlayer.muted=!1,volumeStatus.value=100):(changeButtonType(muteBtn,"player sound-off","Unmute"),mediaPlayer.muted=!0,volumeStatus.value=0)}function replayMedia(){resetPlayer(),mediaPlayer.play()}function updateProgressBar(e){var t=(Math.floor(100/mediaPlayer.duration*mediaPlayer.currentTime),Math.floor($(currentProgress).width()/progWidth*mediaPlayer.duration)),o=Math.floor(mediaPlayer.duration/60),r=Math.round(mediaPlayer.duration-60*o),a=Math.round(mediaPlayer.currentTime),n=0,d=Math.floor(t/3600),i=Math.floor(t/60),n=a-60*i;n>59&&(n=Math.floor(a-60*i),i=Math.floor(a/60),n=0),i>59&&(d=Math.floor(t/3600),i=0,n=0),updProgWidth=Math.floor(a/mediaPlayer.duration*progWidth),10>n&&(n="0"+n),10>vidSecLenght&&(vidSecLenght="0"+vidSecLenght),10>i&&(i="0"+i),10>d&&(d="0"+d),10>a&&(a="0"+a),1!=e&&($(currentProgress).css({width:updProgWidth+"px"}),$("#button-progress").css({left:updProgWidth-$("#button-progress").width()+"px"})),$(".ctime").html(Math.floor(mediaPlayer.duration)>=3600?d+":"+i+":"+n+"/"+hrs+":"+mins+":"+secs:i+":"+n+"/"+o+":"+r),n==adsTime&&$(".advertisement").fadeIn(2e3)}function changeButtonType(e,t,o){e.title=o,e.className=t}function loadVideo(){for(var e=0;e<arguments.length;e++){var t=arguments[e].split("."),o=t[t.length-1];if(canPlayVideo(o)){resetPlayer(),mediaPlayer.src=arguments[e],mediaPlayer.load();break}}}function canPlayVideo(e){var t=mediaPlayer.canPlayType("video/"+e);return""==t?!1:!0}function resetPlayer(){progress=0,mediaPlayer.currentTime=0,changeButtonType(playPauseBtn,"player play","Play")}function fullscreen(){videoFullScreen.request(document.getElementById("media-video"))}function LetProcessYourVolume(e){return volumeClick=!0,mouseY=$(".volume-static-holder").height()-(e.pageY-$(".volume-static-holder").offset().top),0>mouseY||mouseY>$(this).height()?(volumeClick=!1,!1):($("#volume-vertical").css({height:mouseY+"px"}),$("#volume-button").css({top:mouseY-$("#volume-button").height()/2+"px"}),mediaPlayer.volume=$("#volume-vertical").height()/$(this).height(),volumeY=$("#volume-vertical").height()/$(this).height(),void($("#volume-vertical").height()<15?($("#volume-button").css({background:"red"}),$("#volume-vertical").css("overflow","hidden")):$("#volume-button").css("background","#fff")))}function videoForwardBackward(e){mouseX=e.pageX-$("#current-progress").offset().left,currentTime=Math.floor(mouseX)/Math.floor(progWidth)*Math.floor(mediaPlayer.duration),mediaPlayer.currentTime=currentTime}function timeoutMouseMove(e){clearTimeout(timeout),timeout=setTimeout(function(){$("#controls").fadeOut(500),$("#ads-hide").css({bottom:"0px"})},e)}$("#controls").hide(),$("#ads-hide").hide(),$(document).ready(function(){$("#controls").fadeIn(),$("#loader").hide()}),document.addEventListener("DOMContentLoaded",function(){main()},!1);var mediaPlayer,percentageloaded,handle,timeout,progressHandle=!1,hideControls=!1,mouseOverPlayer=!1,progWidth,retry,mp4,webm,ogg,vidMp4Scr,vidWebmScr,vidOggScr,buffPercent,percentLoaded,loader,progress,hrs=0,mins=0,secs=0,tmpSecs=0,adsTime=7,ads=0,vidMinLenght=0,vidSecLenght=0,videoCurrentTime=0,playPauseBtn,timeDuration=0,muteBtn,playIcon=!1,replay,_time,curHrs,curMin,curSec,durHrs,durMin,durSec,progressBar,soundHover=!1,volumeHover=!1,currentTime=0,videoPlaying=!1,start=!1,error=!1,videoTimeLenght,volumes=0,volumeClick=!1,mouseX=0,mouseY=0,volumeY=0,volumeDrag=!1,progressbarClick=!1,updProgWidth=0,videoControls,volumeStatus,bufferedAmount,currentBuffered,currentProgress,playBtn,play,seekSlider,highQual,normalQual,lowQual,fullscreenVid,mouseMoving=!1,videoQuality={"9001p":"highres","1080p":"hd1080","720p":"hd720","480p":"large","360p":"medium","240p":"small","144p":"tiny"},player={volume:"10px",fullscreen:"12px",videoQuality:function(){return this.volume}};$("#media-video").bind("contextmenu",function(){return!1}),$("#media-video").bind("ended",function(){this.paused||this.pause()}),$("#media-video").bind("progress",function(){loadBuffer()}),$("#media-video").bind("loadeddata",function(){loadBuffer()}),$("#media-video").bind("canplaythrough",function(){loadBuffer()}),$("#media-video").bind("playing",function(){loadBuffer()}),$("#mute-icon").hover(function(){soundHover=!0,1==soundHover&&($(".volume").fadeIn(1e3),setTimeout(function(){$(".volume").fadeOut(500)},7e3))}),$(".volume, .volume-static-holder, #volume-vertical").hover(function(){soundHover=!1}),$(".volume").mouseleave(function(){0==soundHover&&$(".volume").fadeOut(1e3)}),$("#volume-vertical").mousedown(function(e){LetProcessYourVolume(e)}),$(".volume-static-holder").mousedown(function(e){LetProcessYourVolume(e)}),$("#progressbar").bind("mousedown",function(e){videoForwardBackward(e)}),$("#buffered").bind("mousedown",function(e){videoForwardBackward(e)}),$(currentProgress).bind("mousedown",function(e){videoForwardBackward(e)}),$("#button-progress").mousedown(function(){progressHandle=!0}),$("html, body").mouseup(function(){progressHandle=!1}),$("html, body").mousemove(function(e){1==progressHandle&&(mouseX=e.pageX-$("#current-progress").offset().left,currentTime=Math.floor(mouseX)/Math.floor(progWidth)*Math.floor(mediaPlayer.duration),currentTime>mediaPlayer.currentTime?mediaPlayer.currentTime+=2:mediaPlayer.currentTime-=2)}),$("#hd-setting").bind("click",function(){$(".hd-setting").toggle("show"),$(".share-video").fadeOut()}),$("#share-video").bind("click",function(){$(".share-video").toggle("show"),$(".hd-setting").fadeOut()}),$(".play-icon").bind("click",function(){togglePlayPause(),0==playIcon?($(this).fadeOut(500),playIcon=!0):$(".play-icon").fadeIn(500),$(".play-icon").fadeOut(500)}),$("#media-video").bind("click",function(){togglePlayPause(),1==playIcon?($(".play-icon").fadeIn(500),playIcon=!1):($(".play-icon").fadeOut(500),playIcon=!0)}),$(".close").bind("click",function(){$(".advertisement").fadeOut(500),$("#ads-hide").fadeIn()}),$("#ads-hide").bind("click",function(){$(".advertisement").fadeIn(1e3),$("#ads-hide").fadeOut()}),$("#media-video, #controls, .play-icon").mouseover(function(){mouseOverPlayer=!0}),$("#media-video, #controls, .play-icon").mouseleave(function(){mouseOverPlayer=!1}),$("html, body").mousemove(function(){mouseOverPlayer?($("#controls").fadeIn(500),hideControls=!1):($("#controls").fadeOut("fast"),hideControls=!0),timeoutMouseMove(5e3),$("#ads-hide").css({bottom:"50px"})});
/****
* This player is not compatible for EI browser :( sorry
* Author by: G-rald Burasca
* wanna know more about me just visit my site at w3.geraldburasca.com (coming soooon.........)
* feel free to contact me gerald.burasca27@gmail.com
* Created on Feb. 2015 - present
****/
